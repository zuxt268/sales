{
    "swagger": "2.0",
    "info": {
        "description": "ドメイン管理API",
        "title": "Sales API",
        "contact": {},
        "version": "1.0"
    },
    "basePath": "/api",
    "paths": {
        "/backup": {
            "post": {
                "description": "Polling domain information",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Domains"
                ],
                "summary": "Backup domains",
                "responses": {
                    "202": {
                        "description": "Accepted"
                    }
                }
            }
        },
        "/domains": {
            "get": {
                "description": "Get domain list",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "summary": "Get domains",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Limit",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Offset",
                        "name": "offset",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "ドメイン名",
                        "name": "name",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "閲覧可能か",
                        "name": "can_view",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "日本のサイトか",
                        "name": "is_japan",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "mapsで問い合わせページを開いたか",
                        "name": "is_send",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "owner_id",
                        "name": "owner_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "ステータス",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "業種",
                        "name": "industry",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "SSL対応可否",
                        "name": "is_ssl",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/response.Domains"
                            }
                        }
                    }
                }
            }
        },
        "/domains/analyze": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "summary": "サイトの情報を解析する",
                "responses": {
                    "204": {
                        "description": "No Content"
                    }
                }
            }
        },
        "/domains/{id}": {
            "get": {
                "description": "Get domain",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "summary": "Get domain",
                "parameters": [
                    {
                        "type": "string",
                        "description": "ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Domain"
                        }
                    }
                }
            },
            "put": {
                "description": "Update domain information",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "summary": "Update domain",
                "parameters": [
                    {
                        "type": "string",
                        "description": "ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新ドメイン情報",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.UpdateDomain"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Domain"
                        }
                    }
                }
            },
            "delete": {
                "description": "Delete domain by name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "summary": "Delete domain",
                "parameters": [
                    {
                        "type": "string",
                        "description": "ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    }
                }
            }
        },
        "/external/analyze/domains": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Homsta"
                ],
                "summary": "Homstaの業種を判別します",
                "responses": {
                    "201": {
                        "description": "Created"
                    }
                }
            }
        },
        "/external/assort": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Wordpress"
                ],
                "summary": "ワードプレスを整理し、スプレッドシートに出力します",
                "responses": {
                    "202": {
                        "description": "Accepted"
                    }
                }
            }
        },
        "/external/deploy": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Wordpress"
                ],
                "summary": "ワードプレスをデプロイします",
                "parameters": [
                    {
                        "description": "デプロイ情報",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.DeployRequest"
                        }
                    }
                ],
                "responses": {
                    "202": {
                        "description": "Accepted"
                    }
                }
            }
        },
        "/external/deploy/one": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Wordpress"
                ],
                "summary": "ワードプレスを一件デプロイします",
                "parameters": [
                    {
                        "description": "デプロイ情報",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.DeployRequest"
                        }
                    }
                ],
                "responses": {
                    "202": {
                        "description": "Accepted"
                    }
                }
            }
        },
        "/external/fetch/domains": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Wordpress"
                ],
                "summary": "ストラテジードライブサーバーにあるドメインフォルダ一覧を取得します。",
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/external/fetch/domains/detail": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Wordpress"
                ],
                "summary": "ストラテジードライブサーバーにあるドメインの詳細情報を取得します",
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/external/output/domains": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Homsta"
                ],
                "summary": "Homstaの業種を判別します",
                "responses": {
                    "201": {
                        "description": "Created"
                    }
                }
            }
        },
        "/fetch": {
            "post": {
                "description": "Fetch domain information from target",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ViewDNS"
                ],
                "summary": "Fetch domains",
                "responses": {
                    "202": {
                        "description": "Accepted"
                    }
                }
            }
        },
        "/growth/analyze": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    }
                }
            }
        },
        "/growth/fetch": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    }
                }
            }
        },
        "/growth/output": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    }
                }
            }
        },
        "/growth/polling": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    }
                }
            }
        },
        "/homsta": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Wordpress"
                ],
                "summary": "ストラテジードライブサーバーにあるWordPressの情報を整理します",
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/homstas": {
            "get": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Homsta"
                ],
                "summary": "Homsta一覧を取得します",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Limit",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Offset",
                        "name": "offset",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/model.Homsta"
                            }
                        }
                    }
                }
            },
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Homsta"
                ],
                "summary": "Homstaを作成します",
                "parameters": [
                    {
                        "description": "Homsta情報",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.Homsta"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created"
                    }
                }
            }
        },
        "/homstas/{name}": {
            "get": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Homsta"
                ],
                "summary": "Homstaを取得します",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Name",
                        "name": "name",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Homsta"
                        }
                    }
                }
            }
        },
        "/polling": {
            "post": {
                "description": "Polling domain information",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Domains"
                ],
                "summary": "Polling domains",
                "responses": {
                    "202": {
                        "description": "Accepted"
                    }
                }
            }
        },
        "/targets": {
            "get": {
                "description": "Get target list",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ターゲット"
                ],
                "summary": "Get targets",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Limit",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Offset",
                        "name": "offset",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/model.Target"
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "Create new target",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ターゲット"
                ],
                "summary": "Create target",
                "parameters": [
                    {
                        "description": "作成ターゲット情報",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/model.CreateTargetRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/model.Target"
                        }
                    }
                }
            }
        },
        "/targets/{id}": {
            "put": {
                "description": "Update target information",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ターゲット"
                ],
                "summary": "Update target",
                "parameters": [
                    {
                        "description": "更新ターゲット情報",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/model.UpdateTargetRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Target"
                        }
                    }
                }
            },
            "delete": {
                "description": "Delete target by id",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ターゲット"
                ],
                "summary": "Delete target",
                "parameters": [
                    {
                        "type": "string",
                        "description": "ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    }
                }
            }
        },
        "/webhook/analyze": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ドメイン"
                ],
                "summary": "PubSubのwebhookエンドポイント",
                "responses": {
                    "204": {
                        "description": "No Content"
                    }
                }
            }
        }
    },
    "definitions": {
        "entity.Deploy": {
            "type": "object",
            "properties": {
                "domain": {
                    "type": "string"
                },
                "server_id": {
                    "type": "string"
                }
            }
        },
        "model.CreateTargetRequest": {
            "type": "object",
            "properties": {
                "ip": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "model.Homsta": {
            "type": "object",
            "properties": {
                "blogName": {
                    "type": "string"
                },
                "createdAt": {
                    "type": "string"
                },
                "dbname": {
                    "type": "string"
                },
                "dbusage": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "discUsage": {
                    "type": "string"
                },
                "domain": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "industry": {
                    "type": "string"
                },
                "mailUsage": {
                    "type": "string"
                },
                "path": {
                    "type": "string"
                },
                "server": {
                    "type": "string"
                },
                "siteURL": {
                    "type": "string"
                },
                "updatedAt": {
                    "type": "string"
                },
                "users": {
                    "type": "string"
                }
            }
        },
        "model.Status": {
            "type": "string",
            "enum": [
                "unknown",
                "initialize",
                "check_view",
                "check_japan",
                "crawl_comp_info",
                "pending_output",
                "done",
                "trash"
            ],
            "x-enum-varnames": [
                "StatusUnknown",
                "StatusInitialize",
                "StatusCheckView",
                "StatusCheckJapan",
                "StatusCrawlCompInfo",
                "StatusPendingOutput",
                "StatusDone",
                "StatusTrash"
            ]
        },
        "model.Target": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "currentPage": {
                    "type": "integer"
                },
                "id": {
                    "type": "integer"
                },
                "ip": {
                    "type": "string"
                },
                "lastFetchedAt": {
                    "type": "string"
                },
                "lastFullScanAt": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "status": {
                    "$ref": "#/definitions/model.TargetStatus"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        },
        "model.TargetStatus": {
            "type": "string",
            "enum": [
                "init",
                "fetched",
                "disabled"
            ],
            "x-enum-varnames": [
                "TargetStatusInit",
                "TargetStatusFetched",
                "TargetStatusDisabled"
            ]
        },
        "model.UpdateTargetRequest": {
            "type": "object",
            "properties": {
                "ip": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "request.DeployRequest": {
            "type": "object",
            "properties": {
                "dst": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/entity.Deploy"
                    }
                },
                "src": {
                    "$ref": "#/definitions/entity.Deploy"
                }
            }
        },
        "request.Homsta": {
            "type": "object",
            "properties": {
                "blogName": {
                    "type": "string"
                },
                "dbUsage": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "discUsage": {
                    "type": "string"
                },
                "path": {
                    "type": "string"
                },
                "siteUrl": {
                    "type": "string"
                },
                "users": {
                    "type": "string"
                }
            }
        },
        "request.UpdateDomain": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "can_view": {
                    "type": "boolean"
                },
                "company": {
                    "type": "string"
                },
                "industry": {
                    "type": "string"
                },
                "is_japan": {
                    "type": "boolean"
                },
                "is_send": {
                    "type": "boolean"
                },
                "is_ssl": {
                    "type": "boolean"
                },
                "landline_phone": {
                    "type": "string"
                },
                "mobile_phone": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "owner_id": {
                    "type": "string"
                },
                "page_num": {
                    "type": "integer"
                },
                "phone": {
                    "type": "string"
                },
                "prefecture": {
                    "type": "string"
                },
                "president": {
                    "type": "string"
                },
                "raw_page": {
                    "type": "string"
                },
                "status": {
                    "$ref": "#/definitions/model.Status"
                },
                "target": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                }
            }
        },
        "response.Domain": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "can_view": {
                    "type": "boolean"
                },
                "company": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "industry": {
                    "type": "string"
                },
                "is_japan": {
                    "type": "boolean"
                },
                "is_send": {
                    "type": "boolean"
                },
                "is_ssl": {
                    "type": "boolean"
                },
                "landline_phone": {
                    "type": "string"
                },
                "mobile_phone": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "owner_id": {
                    "type": "string"
                },
                "page_num": {
                    "type": "integer"
                },
                "phone": {
                    "type": "string"
                },
                "prefecture": {
                    "type": "string"
                },
                "president": {
                    "type": "string"
                },
                "raw_page": {
                    "type": "string"
                },
                "status": {
                    "$ref": "#/definitions/model.Status"
                },
                "target": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        },
        "response.Domains": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer"
                },
                "domains": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.Domain"
                    }
                },
                "total": {
                    "type": "integer"
                }
            }
        }
    },
    "securityDefinitions": {
        "BearerAuth": {
            "description": "Type \"Bearer\" followed by a space and JWT token.",
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        }
    }
}